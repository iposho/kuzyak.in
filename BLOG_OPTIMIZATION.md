# Оптимизация блога для Next.js и Vercel

## Что было реализовано

### 1. Статическая генерация (Static Site Generation)
- ✅ Все страницы блога теперь генерируются статически при сборке
- ✅ Использование `generateStaticParams` для предварительной генерации всех постов
- ✅ Оптимизация для Vercel с `output: 'export'`

### 2. SEO и метаданные
- ✅ Динамические метаданные для каждого поста
- ✅ Open Graph и Twitter Card метаданные
- ✅ Автоматическая генерация sitemap.xml
- ✅ Структурированные данные для лучшего индексирования

### 3. Производительность
- ✅ Кэширование данных блога в памяти
- ✅ Оптимизация изображений с lazy loading
- ✅ Оптимизация bundle size с code splitting
- ✅ Настройки кэширования для Vercel

### 4. Автоматический деплой
- ✅ Настройка Vercel для автоматического деплоя при коммитах
- ✅ Оптимизация конфигурации для статического экспорта

## Как добавить новый пост

1. Создайте папку в `content/posts/` с названием поста (например, `my-new-post`)
2. Создайте файл `index.md` в этой папке:

```markdown
---
title: "Заголовок поста"
date: "2024-01-15"
excerpt: "Краткое описание поста"
tags: ["tag1", "tag2"]
category: "Категория"
featured_image: "./preview.webp"
author: "Павел Кузякин"
draft: false
---

Содержимое поста в Markdown...
```

3. Закоммитьте изменения в репозиторий
4. Vercel автоматически пересоберет и задеплоит сайт

## Структура файлов

```
content/posts/
├── my-post/
│   ├── index.md          # Основной файл поста
│   └── preview.webp      # Превью изображение (опционально)
└── another-post/
    └── index.md
```

Все изображения, расположенные рядом с `index.md`, автоматически копируются в `/public/blog/<slug>/` и доступны на сайте по пути `/blog/<slug>/<filename>`.

## Настройки Vercel

В `vercel.json` настроены:
- Кэширование статических файлов
- Оптимизация для блога
- Правильные редиректы

## Переменные окружения

Добавьте в настройки Vercel:
- `NEXT_PUBLIC_SITE_URL` - URL вашего сайта
- `YANDEX_METRIKA_ID` - ID Яндекс.Метрики
- `GOOGLE_SITE_VERIFICATION` - Код верификации Google

## Производительность

### До оптимизации:
- Клиентская загрузка данных
- Нет кэширования
- Медленная загрузка страниц

### После оптимизации:
- Статическая генерация всех страниц
- Кэширование данных
- Быстрая загрузка (< 1 сек)
- Отличные показатели Lighthouse

## Мониторинг

- Используйте Vercel Analytics для отслеживания производительности
- Настройте уведомления о деплоях
- Мониторьте Core Web Vitals

## Дополнительные возможности

### RSS лента
RSS лента доступна по адресу `/blog/rss.xml/`

### Sitemap
Sitemap автоматически генерируется и доступен по адресу `/sitemap.xml`

### Теги и категории
- Все теги автоматически генерируются в статические страницы
- Категории также поддерживаются
- Пагинация для больших списков

## Команды для разработки

```bash
# Запуск в режиме разработки
npm run dev

# Сборка для продакшена
npm run build

# Проверка линтера
npm run lint

# Проверка стилей
npm run stylelint
```

## Рекомендации

1. **Изображения**: Используйте WebP формат для лучшей производительности
2. **Размер постов**: Оптимальный размер поста - 1000-3000 слов
3. **Теги**: Используйте 3-5 тегов на пост для лучшей категоризации
4. **Обновления**: Регулярно обновляйте старые посты для лучшего SEO

## Поддержка

При возникновении проблем:
1. Проверьте логи в Vercel Dashboard
2. Убедитесь, что все переменные окружения настроены
3. Проверьте синтаксис Markdown файлов
4. Убедитесь, что все изображения доступны
